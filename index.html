<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Proy 2/2026</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6495ED">
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>

    <div id="vista-login" class="card">
        <h2>INGRESO AL SISTEMA</h2>
        <div class="input-group">
            <label>Ingrese Clave de Acceso:</label>
            <input type="password" id="claveEntrada" placeholder="••••">
        </div>
        <button class="btn-guardar-azul" onclick="verificarClave()">Entrar</button>
    </div>

    <div id="vista-admin" class="card hidden">
        <h2>CONFIGURACIÓN DE CLAVES</h2>
        <div class="input-group"><label>Contraseña Admin:</label><input type="password" id="cAdmin"></div>
        <div class="input-group"><label>Contraseña Supervisor:</label><input type="password" id="cSuper"></div>
        <div class="input-group"><label>Contraseña Vendedor:</label><input type="password" id="cVendedor"></div>
        <button class="btn-guardar-azul" onclick="guardarCambios()">Guardar Cambios</button>
        <p onclick="regresarACalculadora()" style="text-align:center; color:#6da0f2; cursor:pointer; margin-top:15px; font-weight:bold;">VOLVER</p>
    </div>

    <div id="vista-principal" class="hidden" style="width: 100%; flex-direction: column; align-items: center;">
        <div class="seccion-tasa-excel">
            <button id="btn-config" class="btn-excel-peque" style="background:#607d8b" onclick="irAConfiguracion()">?</button>
            <div class="tasa-top">
                <p> TASA Bs </p>
                <input type="text" id="tasaCambio" inputmode="decimal" placeholder="0,00" oninput="guardarYCalcular()">
            </div>
            <button id="btn-inv-toggle" class="btn-excel-peque" onclick="mostrarInventario()">??</button>
        </div>
        <div class="contenedor-app">
            <div class="etiquetas-producto"><span>Producto</span><span>Marca</span><span>Unidad</span></div>
            <div id="nombre-detectado" class="info-producto"></div>
            <button class="btn-scan" onclick="alternarEscaneo()">?? ESCANEAR PRODUCTO</button>
            <div id="reader" style="display: none;"></div>
            <div class="grid-headers"><div class="blue-label">Bs.</div><div class="blue-label">Divisa</div></div>
            <div id="lista-filas"><div class="fila-input"><input type="text" class="input-bs" placeholder="0,00" oninput="gestionarEntrada(this)"><input type="text" class="input-divisa" inputmode="decimal" placeholder="0,00" oninput="gestionarEntrada(this)"></div></div>
            <div class="seccion-totales">
                <div class="total-item"><span>Suma Bs:</span> <span id="sumaBs" class="resultado">0.00</span></div>
                <div class="total-item"><span>Suma Divisa (en Bs):</span> <span id="sumaDivisaEnBs" class="resultado">0.00</span></div>
                <div class="gran-total" style="color: var(--accent-color);">TOTAL: <span id="totalGeneral">0.00</span> Bs.</div>
                <div class="gran-total" style="border-top: none; padding-top: 0; margin-top: 5px;">TOTAL: <span id="totalSoloDivisa">0.00</span> Divisa</div>
                <button class="btn-borrar" onclick="limpiarColumnas()">BORRAR MONTOS</button>
            </div>
            <p onclick="location.reload()" style="text-align:center; color:#aaa; cursor:pointer; margin-top:20px; font-size:0.8rem; font-weight:bold;">CERRAR SESIÓN</p>
        </div>
    </div>

    <div id="vista-inventario" class="hidden">
        <button class="btn-regresar" onclick="regresarACalculadora()">? VOLVER</button>
        <button onclick="alternarEscaneoInv()" style="width: 100%; padding: 12px; background: #6495ED; color: white; border: none; border-radius: 8px; font-weight: bold; margin-bottom: 10px; cursor: pointer;">?? BUSCAR / CREAR POR ESCANEO</button>
        <div id="reader-inv" style="display: none;"></div>
        <label for="uploadExcel" class="btn-subir-archivo">?? REEMPLAZAR EXCEL COMPLETAMENTE</label>
        <input type="file" id="uploadExcel" accept=".xlsx, .xls">
        <div style="overflow-x: auto;"><table class="tabla-inv"><thead><tr><th>Código</th><th>Producto</th><th>Marca</th><th>Unidad</th><th>Precio</th><th>??</th></tr></thead><tbody id="cuerpo-tabla-inv"></tbody></table></div>
    </div>

    <div id="vista-editar-producto" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center; z-index:1000;">
        <div class="modal-editar">
            <div class="modal-header">
                <div>
                    <h3>Editar Producto</h3>
                    <p>Modifica los detalles del producto.</p>
                </div>
                <button class="btn-cerrar" onclick="cerrarEdicion()">?</button>
            </div>
            <div class="input-group"><label>Código</label><input type="text" id="edit-cod" class="input-edit" readonly></div>
            <div class="input-group"><label>Producto</label><input type="text" id="edit-prod" class="input-edit"></div>
            <div class="input-group"><label>Marca</label><input type="text" id="edit-marca" class="input-edit"></div>
            <div class="input-group"><label>Unidad</label><input type="text" id="edit-unid" class="input-edit"></div>
            <div class="input-group"><label>Precio</label><input type="text" id="edit-precio" class="input-edit"></div>
            <button class="btn-save-prod" onclick="guardarEdicionModal()">Guardar</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>